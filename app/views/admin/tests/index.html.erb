<% content_for :title, t(".test_list") %>

<div class="admin-tests">
  <div class="form-container">
    <div class="page-header">
      <h1><%= t(".test_list") %></h1>
      <% content_for :breadcrumbs do %>
        <%= link_to content_tag(:i, "", class: "fas fa-home"), root_path %>
        <span class="breadcrumb-separator"> > </span>
        <%= link_to t("admin.tests.index.test_list"), admin_tests_path %>
      <% end %>
      <%= link_to t(".create_test"), new_admin_test_path, class: "btn btn-primary" %>
    </div>

    <div class="search-section mb-4">
      <%= form_with url: admin_tests_path, method: :get, local: true, class: "d-flex gap-2" do |form| %>
        <%= form.text_field :search,
                            value: params[:search],
                            placeholder: t(".search_placeholder"),
                            class: "form-control search-input" %>

        <% if params[:search].present? %>
          <%= link_to t(".clear_search"), admin_tests_path,
                      class: "btn btn-outline-secondary" %>
        <% end %>
      <% end %>
    </div>

    <div class="tests-table">
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th><%= t(".test_name") %></th>
              <th><%= t(".description") %></th>
              <th><%= t(".duration_minutes") %></th>
              <th><%= t(".max_attempts") %></th>
              <th><%= t(".created_date") %></th>
              <th><%= t(".actions") %></th>
            </tr>
          </thead>
          <tbody>
            <%= render partial: "test_row", collection: @tests, as: :test %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="pagination-wrapper">
      <%== pagy_bootstrap_nav @pagy %>
    </div>
  </div>
</div>
